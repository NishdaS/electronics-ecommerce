<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Page title showing order ID dynamically -->
  <title>Receipt - {{ order.order_id }}</title>

  <!-- Bootstrap CSS for styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Bootstrap Icons for iconography -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

  <!-- Custom global CSS file for any additional styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='global.css') }}">

</head>
<body>

<!-- Container for the entire order receipt content -->
<div class="order-container">
    <!-- Title & Confirmation Section -->
    <div class="text-center mb-4">
      <!-- Main confirmation header with icon -->
      <h2 class="receipt-header">
        <i class="bi bi-check-circle-fill me-2"></i>Order Confirmed!
      </h2>
      <!-- Subtitle with receipt icon -->
      <p class="subheader">
        <i class="bi bi-receipt-cutoff me-1"></i>Order Receipt
      </p>
    </div>

    <!-- Basic order information -->
    <div class="mb-4">
      <p><strong>Order ID:</strong> {{ order["order_id"] }}</p>
      <p><strong>Customer:</strong> {{ order["username"] }}</p>
      <p><strong>Date:</strong> {{ order["date"] }}</p>
    </div>

    <!-- Table displaying order items -->
    <div class="table-responsive">
      <table class="table table-bordered align-middle">
        <thead>
          <tr>
            <!-- Table headers -->
            <th scope="col">Product</th>
            <th scope="col" class="text-center">Qty</th>
            <th scope="col" class="text-end">Price (each)</th>
            <th scope="col" class="text-end">Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <!-- Loop through each order item -->
          {% for item in order["items"] %}
          <tr>
            <td>{{ item.name }}</td>
            <td class="text-center">{{ item.quantity }}</td>
            <td class="text-end">${{ "%.2f"|format(item.price) }}</td>
            <!-- Calculate subtotal for this item -->
            <td class="text-end">${{ "%.2f"|format(item["price"] * item["quantity"]) }}</td>
          </tr>
          {% endfor %}
          <!-- Row for total order amount -->
          <tr>
            <td colspan="3" class="total-cell">Total:</td>
            <td class="text-end fw-bold">${{ "%.2f"|format(order.total) }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Display order status with color-coded badge -->
    <p class="mt-4">
      <strong>Status:</strong>
      <span
        class="badge status-badge 
        {% if order.status == 'canceled' %}bg-danger{% else %}bg-success{% endif %}">
        {{ order.status }}
      </span>
    </p>

    <!-- Button to navigate back to products page -->
    <div class="text-center mt-4">
      <a href="/products" class="btn-back">
        <i class="bi bi-arrow-left-circle"></i>Back to Shopping
      </a>
    </div>
</div>

<!-- Bootstrap JS Bundle for interactive components -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
